{% extends "base.html" %}

{% block content %}
<div class="max-w-2xl mx-auto space-y-8">
    <!-- Mensaje de confirmación -->
    <div class="confirmation-success p-6 bg-green-50 rounded-lg border border-green-200">
        <h2 class="text-2xl text-green-700 font-semibold mb-4">
            ¡Gracias por confirmar su asistencia!
        </h2>
        
        <div class="mb-6">
            <p class="text-green-600 mb-2">Hemos registrado las siguientes confirmaciones:</p>
            <ul class="space-y-2">
                {% for guest in updated_guests %}
                    <li class="flex items-center">
                        <span class="mr-2">
                            {% if guest.is_attending %}
                                <span class="text-blue-600">•</span>
                            {% else %}
                                <span class="text-red-600">•</span>
                            {% endif %}
                        </span>
                        <span class="font-medium">{{ guest.name }}</span>
                        {% if guest.is_attending %}
                            <span class="ml-2 text-blue-600">asistirá</span>
                        {% else %}
                            <span class="ml-2 text-red-600">no podrá asistir</span>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Formulario para mensaje -->
    <div class="bg-white p-6 rounded-lg shadow-lg">
        <h3 class="text-xl font-semibold mb-4">¿Te gustaría dejar un mensaje para los novios?</h3>
        
        <form method="POST" action="/message/{{ group_uuid }}" class="space-y-4">
            <div>
                <label for="message" class="block text-sm font-medium text-gray-700 mb-2">
                    Tu mensaje:
                </label>
                <textarea 
                    name="message" 
                    id="message" 
                    rows="4" 
                    class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                    placeholder="Escribe tus buenos deseos o mensaje para los novios..."
                    required></textarea>
            </div>

            <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    ¿Quién firma este mensaje?
                </label>
                {% for guest in updated_guests %}
                    <div class="flex items-center mb-2">
                        <input 
                            type="checkbox" 
                            name="signers" 
                            value="{{ guest.id }}"
                            id="signer_{{ guest.id }}"
                            class="rounded border-gray-300 text-blue-600 focus:ring-blue-500">
                        <label for="signer_{{ guest.id }}" class="ml-2">
                            {{ guest.name }}
                        </label>
                    </div>
                {% endfor %}
            </div>

            <div class="flex justify-between items-center">
                <button 
                    type="submit"
                    class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded">
                    Enviar mensaje
                </button>
                
                <a href="/{{ group_uuid }}" 
                   class="text-gray-500 hover:text-gray-700 underline">
                    Volver sin enviar mensaje
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}